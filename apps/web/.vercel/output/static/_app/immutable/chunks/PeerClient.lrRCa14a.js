import{s as j,u as W,a as q,c as K,i as O,v as Z,w as J,x as Q,d as P,o as x,f as F,W as tt,g as N,h as I,X as et,j as M,r as st}from"./scheduler.lc6pDmfW.js";import{S as nt,i as ot,a as it,t as rt}from"./index._UJvAQqJ.js";import{a as at}from"./peerUtils.OfQ6oFS9.js";var w=(n=>(n[n.Border=-1]="Border",n[n.Data=0]="Data",n[n.Function=1]="Function",n[n.Position=2]="Position",n[n.Timing=3]="Timing",n[n.Alignment=4]="Alignment",n))(w||{}),lt=Object.defineProperty,ht=(n,t,e)=>t in n?lt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,_=(n,t,e)=>(ht(n,typeof t!="symbol"?t+"":t,e),e);const ct=[0,1],$=[1,0],U=[2,3],L=[3,2],ft={L:ct,M:$,Q:U,H:L},ut=/^[0-9]*$/,dt=/^[A-Z0-9 $%*+.\/:-]*$/,A="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",C=1,R=40,B=3,mt=3,E=40,gt=10,D=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],T=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];class wt{constructor(t,e,s,i){if(this.version=t,this.ecc=e,_(this,"size"),_(this,"mask"),_(this,"modules",[]),_(this,"types",[]),t<C||t>R)throw new RangeError("Version value out of range");if(i<-1||i>7)throw new RangeError("Mask value out of range");this.size=t*4+17;const o=Array.from({length:this.size},()=>!1);for(let a=0;a<this.size;a++)this.modules.push(o.slice()),this.types.push(o.map(()=>0));this.drawFunctionPatterns();const r=this.addEccAndInterleave(s);if(this.drawCodewords(r),i===-1){let a=1e9;for(let l=0;l<8;l++){this.applyMask(l),this.drawFormatBits(l);const h=this.getPenaltyScore();h<a&&(i=l,a=h),this.applyMask(l)}}this.mask=i,this.applyMask(i),this.drawFormatBits(i)}getModule(t,e){return t>=0&&t<this.size&&e>=0&&e<this.size&&this.modules[e][t]}drawFunctionPatterns(){for(let s=0;s<this.size;s++)this.setFunctionModule(6,s,s%2===0,w.Timing),this.setFunctionModule(s,6,s%2===0,w.Timing);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const t=this.getAlignmentPatternPositions(),e=t.length;for(let s=0;s<e;s++)for(let i=0;i<e;i++)s===0&&i===0||s===0&&i===e-1||s===e-1&&i===0||this.drawAlignmentPattern(t[s],t[i]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(t){const e=this.ecc[1]<<3|t;let s=e;for(let o=0;o<10;o++)s=s<<1^(s>>>9)*1335;const i=(e<<10|s)^21522;for(let o=0;o<=5;o++)this.setFunctionModule(8,o,d(i,o));this.setFunctionModule(8,7,d(i,6)),this.setFunctionModule(8,8,d(i,7)),this.setFunctionModule(7,8,d(i,8));for(let o=9;o<15;o++)this.setFunctionModule(14-o,8,d(i,o));for(let o=0;o<8;o++)this.setFunctionModule(this.size-1-o,8,d(i,o));for(let o=8;o<15;o++)this.setFunctionModule(8,this.size-15+o,d(i,o));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let t=this.version;for(let s=0;s<12;s++)t=t<<1^(t>>>11)*7973;const e=this.version<<12|t;for(let s=0;s<18;s++){const i=d(e,s),o=this.size-11+s%3,r=Math.floor(s/3);this.setFunctionModule(o,r,i),this.setFunctionModule(r,o,i)}}drawFinderPattern(t,e){for(let s=-4;s<=4;s++)for(let i=-4;i<=4;i++){const o=Math.max(Math.abs(i),Math.abs(s)),r=t+i,a=e+s;r>=0&&r<this.size&&a>=0&&a<this.size&&this.setFunctionModule(r,a,o!==2&&o!==4,w.Position)}}drawAlignmentPattern(t,e){for(let s=-2;s<=2;s++)for(let i=-2;i<=2;i++)this.setFunctionModule(t+i,e+s,Math.max(Math.abs(i),Math.abs(s))!==1,w.Alignment)}setFunctionModule(t,e,s,i=w.Function){this.modules[e][t]=s,this.types[e][t]=i}addEccAndInterleave(t){const e=this.version,s=this.ecc;if(t.length!==b(e,s))throw new RangeError("Invalid argument");const i=T[s[0]][e],o=D[s[0]][e],r=Math.floor(z(e)/8),a=i-r%i,l=Math.floor(r/i),h=[],u=yt(o);for(let f=0,g=0;f<i;f++){const p=t.slice(g,g+l-o+(f<a?0:1));g+=p.length;const H=Ct(p,u);f<a&&p.push(0),h.push(p.concat(H))}const c=[];for(let f=0;f<h[0].length;f++)h.forEach((g,p)=>{(f!==l-o||p>=a)&&c.push(g[f])});return c}drawCodewords(t){if(t.length!==Math.floor(z(this.version)/8))throw new RangeError("Invalid argument");let e=0;for(let s=this.size-1;s>=1;s-=2){s===6&&(s=5);for(let i=0;i<this.size;i++)for(let o=0;o<2;o++){const r=s-o,l=(s+1&2)===0?this.size-1-i:i;!this.types[l][r]&&e<t.length*8&&(this.modules[l][r]=d(t[e>>>3],7-(e&7)),e++)}}}applyMask(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(let e=0;e<this.size;e++)for(let s=0;s<this.size;s++){let i;switch(t){case 0:i=(s+e)%2===0;break;case 1:i=e%2===0;break;case 2:i=s%3===0;break;case 3:i=(s+e)%3===0;break;case 4:i=(Math.floor(s/3)+Math.floor(e/2))%2===0;break;case 5:i=s*e%2+s*e%3===0;break;case 6:i=(s*e%2+s*e%3)%2===0;break;case 7:i=((s+e)%2+s*e%3)%2===0;break;default:throw new Error("Unreachable")}!this.types[e][s]&&i&&(this.modules[e][s]=!this.modules[e][s])}}getPenaltyScore(){let t=0;for(let o=0;o<this.size;o++){let r=!1,a=0;const l=[0,0,0,0,0,0,0];for(let h=0;h<this.size;h++)this.modules[o][h]===r?(a++,a===5?t+=B:a>5&&t++):(this.finderPenaltyAddHistory(a,l),r||(t+=this.finderPenaltyCountPatterns(l)*E),r=this.modules[o][h],a=1);t+=this.finderPenaltyTerminateAndCount(r,a,l)*E}for(let o=0;o<this.size;o++){let r=!1,a=0;const l=[0,0,0,0,0,0,0];for(let h=0;h<this.size;h++)this.modules[h][o]===r?(a++,a===5?t+=B:a>5&&t++):(this.finderPenaltyAddHistory(a,l),r||(t+=this.finderPenaltyCountPatterns(l)*E),r=this.modules[h][o],a=1);t+=this.finderPenaltyTerminateAndCount(r,a,l)*E}for(let o=0;o<this.size-1;o++)for(let r=0;r<this.size-1;r++){const a=this.modules[o][r];a===this.modules[o][r+1]&&a===this.modules[o+1][r]&&a===this.modules[o+1][r+1]&&(t+=mt)}let e=0;for(const o of this.modules)e=o.reduce((r,a)=>r+(a?1:0),e);const s=this.size*this.size,i=Math.ceil(Math.abs(e*20-s*10)/s)-1;return t+=i*gt,t}getAlignmentPatternPositions(){if(this.version===1)return[];{const t=Math.floor(this.version/7)+2,e=this.version===32?26:Math.ceil((this.version*4+4)/(t*2-2))*2,s=[6];for(let i=this.size-7;s.length<t;i-=e)s.splice(1,0,i);return s}}finderPenaltyCountPatterns(t){const e=t[1],s=e>0&&t[2]===e&&t[3]===e*3&&t[4]===e&&t[5]===e;return(s&&t[0]>=e*4&&t[6]>=e?1:0)+(s&&t[6]>=e*4&&t[0]>=e?1:0)}finderPenaltyTerminateAndCount(t,e,s){return t&&(this.finderPenaltyAddHistory(e,s),e=0),e+=this.size,this.finderPenaltyAddHistory(e,s),this.finderPenaltyCountPatterns(s)}finderPenaltyAddHistory(t,e){e[0]===0&&(t+=this.size),e.pop(),e.unshift(t)}}function m(n,t,e){if(t<0||t>31||n>>>t)throw new RangeError("Value out of range");for(let s=t-1;s>=0;s--)e.push(n>>>s&1)}function d(n,t){return(n>>>t&1)!==0}class v{constructor(t,e,s){if(this.mode=t,this.numChars=e,this.bitData=s,e<0)throw new RangeError("Invalid argument");this.bitData=s.slice()}getData(){return this.bitData.slice()}}const pt=[1,10,12,14],Mt=[2,9,11,13],_t=[4,8,16,16];function V(n,t){return n[Math.floor((t+7)/17)+1]}function Y(n){const t=[];for(const e of n)m(e,8,t);return new v(_t,n.length,t)}function Et(n){if(!X(n))throw new RangeError("String contains non-numeric characters");const t=[];for(let e=0;e<n.length;){const s=Math.min(n.length-e,3);m(Number.parseInt(n.substring(e,e+s),10),s*3+1,t),e+=s}return new v(pt,n.length,t)}function Pt(n){if(!G(n))throw new RangeError("String contains unencodable characters in alphanumeric mode");const t=[];let e;for(e=0;e+2<=n.length;e+=2){let s=A.indexOf(n.charAt(e))*45;s+=A.indexOf(n.charAt(e+1)),m(s,11,t)}return e<n.length&&m(A.indexOf(n.charAt(e)),6,t),new v(Mt,n.length,t)}function bt(n){return n===""?[]:X(n)?[Et(n)]:G(n)?[Pt(n)]:[Y(zt(n))]}function X(n){return ut.test(n)}function G(n){return dt.test(n)}function At(n,t){let e=0;for(const s of n){const i=V(s.mode,t);if(s.numChars>=1<<i)return Number.POSITIVE_INFINITY;e+=4+i+s.bitData.length}return e}function zt(n){n=encodeURI(n);const t=[];for(let e=0;e<n.length;e++)n.charAt(e)!=="%"?t.push(n.charCodeAt(e)):(t.push(Number.parseInt(n.substring(e+1,e+3),16)),e+=2);return t}function z(n){if(n<C||n>R)throw new RangeError("Version number out of range");let t=(16*n+128)*n+64;if(n>=2){const e=Math.floor(n/7)+2;t-=(25*e-10)*e-55,n>=7&&(t-=36)}return t}function b(n,t){return Math.floor(z(n)/8)-D[t[0]][n]*T[t[0]][n]}function yt(n){if(n<1||n>255)throw new RangeError("Degree out of range");const t=[];for(let s=0;s<n-1;s++)t.push(0);t.push(1);let e=1;for(let s=0;s<n;s++){for(let i=0;i<t.length;i++)t[i]=y(t[i],e),i+1<t.length&&(t[i]^=t[i+1]);e=y(e,2)}return t}function Ct(n,t){const e=t.map(s=>0);for(const s of n){const i=s^e.shift();e.push(0),t.forEach((o,r)=>e[r]^=y(o,i))}return e}function y(n,t){if(n>>>8||t>>>8)throw new RangeError("Byte out of range");let e=0;for(let s=7;s>=0;s--)e=e<<1^(e>>>7)*285,e^=(t>>>s&1)*n;return e}function Rt(n,t,e=1,s=40,i=-1,o=!0){if(!(C<=e&&e<=s&&s<=R)||i<-1||i>7)throw new RangeError("Invalid value");let r,a;for(r=e;;r++){const c=b(r,t)*8,f=At(n,r);if(f<=c){a=f;break}if(r>=s)throw new RangeError("Data too long")}for(const c of[$,U,L])o&&a<=b(r,c)*8&&(t=c);const l=[];for(const c of n){m(c.mode[0],4,l),m(c.numChars,V(c.mode,r),l);for(const f of c.getData())l.push(f)}const h=b(r,t)*8;m(0,Math.min(4,h-l.length),l),m(0,(8-l.length%8)%8,l);for(let c=236;l.length<h;c^=253)m(c,8,l);const u=Array.from({length:Math.ceil(l.length/8)},()=>0);return l.forEach((c,f)=>u[f>>>3]|=c<<7-(f&7)),new wt(r,t,u,i)}function vt(n,t){const{ecc:e="L",boostEcc:s=!1,minVersion:i=1,maxVersion:o=40,maskPattern:r=-1,border:a=1}=t||{},l=typeof n=="string"?bt(n):Array.isArray(n)?[Y(n)]:void 0;if(!l)throw new Error(`uqr only supports encoding string and binary data, but got: ${typeof n}`);const h=Rt(l,ft[e],i,o,r,s),u=Ft({version:h.version,maskPattern:h.mask,size:h.size,data:h.modules,types:h.types},a);return t?.invert&&(u.data=u.data.map(c=>c.map(f=>!f))),t?.onEncoded?.(u),u}function Ft(n,t=1){if(!t)return n;const{size:e}=n,s=e+t*2;n.size=s,n.data.forEach(o=>{for(let r=0;r<t;r++)o.unshift(!1),o.push(!1)});for(let o=0;o<t;o++)n.data.unshift(Array.from({length:s},r=>!1)),n.data.push(Array.from({length:s},r=>!1));const i=w.Border;n.types.forEach(o=>{for(let r=0;r<t;r++)o.unshift(i),o.push(i)});for(let o=0;o<t;o++)n.types.unshift(Array.from({length:s},r=>i)),n.types.push(Array.from({length:s},r=>i));return n}function k(n,t={}){const e=vt(n,t),{pixelSize:s=10,whiteColor:i="white",blackColor:o="black"}=t,r=e.size*s,a=e.size*s;let l=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${a} ${r}">`;const h=[];for(let u=0;u<e.size;u++)for(let c=0;c<e.size;c++){const f=c*s,g=u*s;e.data[u][c]&&h.push(`M${f},${g}h${s}v${s}h-${s}z`)}return l+=`<rect fill="${i}" width="${a}" height="${r}"/>`,l+=`<path fill="${o}" d="${h.join("")}"/>`,l+="</svg>",l}function S(n){let t,e,s,i=k(n[0])+"";return{c(){t=F("a"),e=F("div"),s=new tt(!1),this.h()},l(o){t=N(o,"A",{title:!0,class:!0,href:!0,target:!0});var r=I(t);e=N(r,"DIV",{class:!0});var a=I(e);s=et(a,!1),a.forEach(P),r.forEach(P),this.h()},h(){s.a=null,M(e,"class","w-32 h-32"),M(t,"title",n[1]),M(t,"class","absolute top-0 left-0"),M(t,"href",n[0]),M(t,"target","_new")},m(o,r){O(o,t,r),st(t,e),s.m(i,e)},p(o,r){r&1&&i!==(i=k(o[0])+"")&&s.p(i),r&1&&M(t,"href",o[0])},d(o){o&&P(t)}}}function Nt(n){let t,e,s=n[0]&&S(n);const i=n[4].default,o=W(i,n,n[3],null);return{c(){s&&s.c(),t=q(),o&&o.c()},l(r){s&&s.l(r),t=K(r),o&&o.l(r)},m(r,a){s&&s.m(r,a),O(r,t,a),o&&o.m(r,a),e=!0},p(r,[a]){r[0]?s?s.p(r,a):(s=S(r),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),o&&o.p&&(!e||a&8)&&Z(o,i,r,r[3],e?Q(i,r[3],a,null):J(r[3]),null)},i(r){e||(it(o,r),e=!0)},o(r){rt(o,r),e=!1},d(r){r&&P(t),s&&s.d(r),o&&o.d(r)}}}function It(n,t,e){let{$$slots:s={},$$scope:i}=t,o,r,{handleChange:a}=t;return x(async()=>{at(window.location.origin,a,l=>e(0,r=l))}),n.$$set=l=>{"handleChange"in l&&e(2,a=l.handleChange),"$$scope"in l&&e(3,i=l.$$scope)},[r,o,a,i,s]}class Ot extends nt{constructor(t){super(),ot(this,t,It,Nt,j,{handleChange:2})}}export{Ot as P};
